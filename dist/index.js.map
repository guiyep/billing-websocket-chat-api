{"version":3,"sources":["../src/index.js"],"names":["server","http","createServer","PORT","wss","WebSocket","Server","sendMessage","ws","data","result","JSON","stringify","console","log","send","getMessage","msg","parsedMessage","parse","on","req","parseMessage","name","message","listen"],"mappings":";;AAAA;;AACA;;AACA;;;;AAEA,IAAMA,MAAM,GAAGC,iBAAKC,YAAL,EAAf;;AACA,IAAMC,IAAI,GAAG,IAAb;AAEA,IAAMC,GAAG,GAAG,IAAIC,eAAUC,MAAd,CAAqB;AAAEN,EAAAA,MAAM,EAANA;AAAF,CAArB,CAAZ;;AAEA,IAAMO,WAAW,GAAG,SAAdA,WAAc,CAACC,EAAD,EAAKC,IAAL,EAAc;AAChC,MAAMC,MAAM,GAAGC,IAAI,CAACC,SAAL,CAAeH,IAAf,CAAf;AACAI,EAAAA,OAAO,CAACC,GAAR,mBAAuBJ,MAAvB;AACAF,EAAAA,EAAE,CAACO,IAAH,CAAQL,MAAR;AACD,CAJD;;AAMA,IAAMM,UAAU,GAAG,SAAbA,UAAa,CAACC,GAAD,EAAS;AAC1BJ,EAAAA,OAAO,CAACC,GAAR,oBAAwBG,GAAxB;AACA,MAAMC,aAAa,GAAGP,IAAI,CAACQ,KAAL,CAAWF,GAAX,CAAtB;AACA,SAAOC,aAAP;AACD,CAJD;;AAMAd,GAAG,CAACgB,EAAJ,CAAO,YAAP,EAAqB,UAACZ,EAAD,EAAKa,GAAL,EAAa;AAChCR,EAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AAEAN,EAAAA,EAAE,CAACY,EAAH,CAAM,SAAN,EAAiB,UAACH,GAAD,EAAS;AACxB,QAAIA,GAAJ,EAAS;AACP,UAAMK,YAAY,GAAGN,UAAU,CAACC,GAAD,CAA/B;;AAEA,UAAIK,YAAY,CAACC,IAAb,IAAqB,iBAAzB,EAA4C;AAC1ChB,QAAAA,WAAW,CAACC,EAAD,EAAK,qCAAsBc,YAAY,CAACE,OAAnC,CAAL,CAAX;AACD;;AAED,UAAIF,YAAY,CAACC,IAAb,IAAqB,yBAAzB,EAAoD;AAClDhB,QAAAA,WAAW,CAACC,EAAD,EAAK,uCAAwBc,YAAY,CAACE,OAArC,CAAL,CAAX;AACD;AACF;AACF,GAZD;AAaD,CAhBD;AAkBAxB,MAAM,CAACyB,MAAP,CAActB,IAAd;AAEAU,OAAO,CAACC,GAAR","sourcesContent":["import WebSocket from 'ws';\nimport http from 'http';\nimport { getAllMessagesForClient, getAllMessagesForUser } from './messages';\n\nconst server = http.createServer();\nconst PORT = 8080;\n\nconst wss = new WebSocket.Server({ server });\n\nconst sendMessage = (ws, data) => {\n  const result = JSON.stringify(data);\n  console.log(`SENDING ${result}`);\n  ws.send(result);\n};\n\nconst getMessage = (msg) => {\n  console.log(`RECEIVED ${msg}`);\n  const parsedMessage = JSON.parse(msg);\n  return parsedMessage;\n};\n\nwss.on('connection', (ws, req) => {\n  console.log('we are connected!!!');\n\n  ws.on('message', (msg) => {\n    if (msg) {\n      const parseMessage = getMessage(msg);\n\n      if (parseMessage.name == 'CONNECT-ACCOUNT') {\n        sendMessage(ws, getAllMessagesForUser(parseMessage.message));\n      }\n\n      if (parseMessage.name == 'GET-ALL-MESSAGES-CLIENT') {\n        sendMessage(ws, getAllMessagesForClient(parseMessage.message));\n      }\n    }\n  });\n});\n\nserver.listen(PORT);\n\nconsole.log(`listening ws://localhost:8080`);\n"],"file":"index.js"}